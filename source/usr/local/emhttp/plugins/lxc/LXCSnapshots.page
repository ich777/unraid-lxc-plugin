Menu="LXC:1"
Title="Snapshots"
Cond="exec(\"lxc-ls 2>/dev/null\")"
---
<?php
require_once('/usr/local/emhttp/plugins/lxc/include/Container.php');
?>

<link rel="stylesheet" href="/plugins/lxc/css/lxc.css">
<script src="/plugins/lxc/js/lxc.js"></script>

<?php

$allContainers = getAllContainers();

foreach ($allContainers as $container) { ?>
        <h2><?= $container->name ?></h2>
        <br>
        <table id="snapshot_table" class="tablesorter two shift">
            <thead>
            <tr>
                <th>Name</th>
                <th>Date/Time</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody align="left">
<?

        if (count($container->snapshots) > 0) {
          foreach ($container->snapshots as $snapshot) {
            ?>
            <tr style='height: 50px;'>
              <td>
                <?= $snapshot->name?>
              </td>
              <td>
                <?= $snapshot->date ?> <?= $snapshot->time ?>
              </td>
              <td style='display: flex;'>
                <a href='LXCRestoreSnapshot?cont=<?= $container->name?>&snap=<?= $snapshot->name ?>&date=<?= $snapshot->date ?>_<?= $snapshot->time ?>' class='button'>
                  Create Container From Snapshot
                </a>
                <a href="#" class="button deleteSNAP" id="<?= $container->name ?> <?= $snapshot->name ?>">
                  Delete Snapshot
                </a>
              </td>
            </tr>
<?php
          }
        } else {
          echo "<tr><td>No snapshots</td><tr>";
        }
          echo "</tbody></table>";
}

?>
